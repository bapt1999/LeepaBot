START OF DOCUMENT

REVISED PROJECT DOCUMENT The Dynamic Physics Chatbot LeepaBot

User Profile and Objectives
The background is a first-year physics master student focusing on particle physics. Availability is six months of free time for a personal engineering journey. The primary goal is to build a highly conversational, context-aware, autonomous Discord chatbot that actively participates in discussions, shitposts, and organically reacts to the channel. The secondary feature is that the bot will eventually parse PDFs and images to autonomously return physics summaries.

Core Architectural Features
The cloud host uses the Python discord library and is deployed on a free cloud hosting tier. The external AI engine offloads computational heavy lifting to a free external LLM API, with no AI processing on local hardware. The pipeline utilizes a multi-stage probability filter to route messages and protect API tokens.

Completed Phases

Phase 1 and 2 Interface and Abstraction
The bot reliably connects to Discord and separates event handling from business logic. Replacing the message processing logic with another implementation requires no changes to the main Discord code. The Discord layer is completely blind to the business logic.

Phase 2.5 The Multi-State Router
The bot utilizes a three-stage text routing architecture. Stage 1 is the Observer, a pure Python function that evaluates message geometry, word count, and structural heuristics to assign specific context tags like general chat or physics explanation. Stage 2 is the Router, which catches the tag and instantly kills the process if ignored, protecting API tokens. Stage 3 is the Generator, which dynamically builds the LLM system prompt based on the context tag and forces a strict JSON response schema to prevent token bleed.

Pending Phases

Phase 3 Context and Memory Pipeline
The bot will utilize a dual memory architecture. The short-term memory will use a local clustering heuristic that evaluates timestamp decay and keyword overlap to group messages contextually, rather than relying on a fixed sliding window or Discord reply features. It will also assign temporary local IDs to messages to prevent the LLM from hallucinating eighteen-digit Discord Snowflakes. The long-term memory will utilize a server lore text file injected into the system prompt to maintain long-term server vibe awareness.

Phase 4 Personality Injection and Autonomous Engagement
The architecture will implement a massive base prompt to give LeepaBot a consistent core identity underneath the situational tags. Zero-cost emoji reactions will be integrated directly into the Python router to give the bot a physical presence in the channel without spending API tokens.

Phase 5 The Physics Vanity Plate
The bot will process uploaded documents by detecting message attachments, extracting text from PDFs, chunking long text to respect token limits, and seamlessly weaving heavy physics summaries into its existing conversational tone.

END OF DOCUMENT